{"is_source_file": true, "format": "Python", "description": "FastAPI router definitions for product, alert, and job endpoints in a price tracking web application, including CRUD operations, price history retrieval, and a background job for fetching latest prices and generating alerts.", "external_files": [".db", ".models", ".schemas", ".services"], "external_methods": ["get_db", "PricingService.fetch_latest_price", "maybe_create_alert"], "published": ["list_products", "create_product", "get_product", "update_product_put", "update_product_patch", "delete_product", "get_price_history", "list_alerts", "fetch_latest_prices_job"], "classes": [{"name": "APIRouter", "description": "FastAPI router class used to define API endpoints for different resource groups."}, {"name": "PricingService", "description": "Service class responsible for fetching latest product prices."}], "methods": [{"name": "list_products", "description": "Returns a list of all tracked products with nested price history and alerts."}, {"name": "create_product", "description": "Creates a new product with optional initial current price."}, {"name": "_get_product_or_404", "description": "Helper function to retrieve a product by ID or raise 404 if not found."}, {"name": "get_product", "description": "Retrieves a product by ID including price history and alerts."}, {"name": "update_product_put", "description": "Replaces product fields with provided data."}, {"name": "update_product_patch", "description": "Partially updates product fields."}, {"name": "delete_product", "description": "Deletes a product and associated data."}, {"name": "get_price_history", "description": "Returns all price history entries for a product."}, {"name": "list_alerts", "description": "Lists all alerts ordered by trigger time."}, {"name": "fetch_latest_prices_job", "description": "Fetches latest prices for all products, updates database, and creates alerts if needed."}], "calls": ["db.query", "db.add", "db.commit", "db.refresh", "pricing_service.fetch_latest_price", "maybe_create_alert"], "search-terms": ["FastAPI routers", "product CRUD", "price history", "alerts", "fetch latest prices", "background job", "price tracking API"], "state": 2, "file_id": 9, "knowledge_revision": 57, "git_revision": "e33d403271ac4e20c23e022dab1cddb9dbbf167e", "revision_history": [{"22": ""}, {"27": "38847bfc104168d7cedc087b9606ac73d68658a5"}, {"30": "38847bfc104168d7cedc087b9606ac73d68658a5"}, {"34": "36e9a0e239f8dcec505e817915044a6093ff4a45"}, {"35": "36e9a0e239f8dcec505e817915044a6093ff4a45"}, {"36": "dd4db1a310fcd84c5eca094c1b703ddc698e186f"}, {"37": "dd4db1a310fcd84c5eca094c1b703ddc698e186f"}, {"40": "88e9836dfe1f541a75b70c95b61e7e8bbfe79bfc"}, {"42": "88e9836dfe1f541a75b70c95b61e7e8bbfe79bfc"}, {"43": "88e9836dfe1f541a75b70c95b61e7e8bbfe79bfc"}, {"57": "e33d403271ac4e20c23e022dab1cddb9dbbf167e"}], "ctags": [], "filename": "backend/src/api/routers.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/pricesense-web-application-45425-45430.git:kavia-main"}